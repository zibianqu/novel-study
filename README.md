# NovelForge AI - æ™ºèƒ½å°è¯´åˆ›ä½œå¹³å°

> åŸºäºå¤š Agent åä½œçš„ AI é©±åŠ¨å°è¯´åˆ›ä½œå·¥å…·

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Go Version](https://img.shields.io/badge/Go-1.24-blue)](https://golang.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-16-blue)](https://www.postgresql.org/)
[![Neo4j](https://img.shields.io/badge/Neo4j-5.x-green)](https://neo4j.com/)

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¬ 7 ä¸ªæ ¸å¿ƒ AI Agent

| Agent | è§’è‰² | æ¸©åº¦ | èŒè´£ |
|-------|------|------|------|
| **Agent 0** | æ€»å¯¼æ¼” ğŸ¬ | 0.5 | å…¨å±€è°ƒåº¦ã€ä»»åŠ¡åˆ†é… |
| **Agent 1** | æ—ç™½å™è¿°è€… ğŸ™ï¸ | 0.8 | ç¯å¢ƒ/åŠ¨ä½œ/å¿ƒç†æå†™ |
| **Agent 2** | è§’è‰²æ‰®æ¼”è€… ğŸ­ | 0.9 | è§’è‰²å¯¹è¯ã€è¡Œä¸º |
| **Agent 3** | å®¡æ ¸å¯¼æ¼” ğŸ‘ï¸ | 0.3 | è´¨é‡å®¡æ ¸ã€ä¸€è‡´æ€§æ£€æŸ¥ |
| **Agent 4** | å¤©çº¿æŒæ§è€… ğŸŒ | 0.7 | ä¸–ç•Œå‘½è¿ã€åŠ¿åŠ›æ ¼å±€ |
| **Agent 5** | åœ°çº¿æŒæ§è€… ğŸŒ± | 0.7 | ä¸»è§’æˆé•¿è·¯å¾„ |
| **Agent 6** | å‰§æƒ…çº¿æŒæ§è€… ğŸ¯ | 0.7 | å…·ä½“æƒ…èŠ‚æ¨è¿› |

### ğŸ“š æ ¸å¿ƒåŠŸèƒ½

- âœ… **Monaco Editor** - ä¸“ä¸šå†™ä½œç¼–è¾‘å™¨
- âœ… **AI å¯¹è¯åŠ©æ‰‹** - å®æ—¶åˆ›ä½œè¾…åŠ©
- âœ… **RAG çŸ¥è¯†åº“** - å‘é‡æ£€ç´¢å¢å¼ºç”Ÿæˆ
- âœ… **çŸ¥è¯†å›¾è°±** - Neo4j å…³ç³»å¯è§†åŒ–
- âœ… **ä¸‰çº¿ç®¡ç†** - å¤©çº¿/åœ°çº¿/å‰§æƒ…çº¿
- âœ… **è‡ªåŠ¨ä¿å­˜** - 30ç§’æ— æ“ä½œè‡ªåŠ¨ä¿å­˜
- âœ… **å®æ—¶ç»Ÿè®¡** - å­—æ•°ã€ç« èŠ‚æ•°ç»Ÿè®¡
- âœ… **pgvector æ£€ç´¢** - è¯­ä¹‰ç›¸ä¼¼åº¦æœç´¢

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Frontend (Layui)               â”‚
â”‚  ç™»å½• â”‚ ä»ªè¡¨æ¿ â”‚ é¡¹ç›® â”‚ ç¼–è¾‘å™¨ â”‚ çŸ¥è¯†åº“   â”‚
â”‚         å›¾è°± â”‚ ä¸‰çº¿ç®¡ç†                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Backend (Gin + Go)               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚ AI Engine   â”‚  â”‚ RAG System   â”‚          â”‚
â”‚ â”‚ 7 Agents    â”‚  â”‚ Retriever    â”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚        â”‚                â”‚                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚ â”‚     Service Layer              â”‚          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚        â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚ PostgreSQL     â”‚  â”‚ Neo4j       â”‚        â”‚
â”‚ â”‚ + pgvector     â”‚  â”‚ (çŸ¥è¯†å›¾è°±)  â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚        â”‚                                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚ â”‚ OpenAI API     â”‚                          â”‚
â”‚ â”‚ gpt-4o         â”‚                          â”‚
â”‚ â”‚ text-embed-3   â”‚                          â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

**åç«¯**
- Golang 1.24
- Gin Web Framework
- PostgreSQL 16 + pgvector
- Neo4j 5.x
- OpenAI API (gpt-4o, text-embedding-3-small)

**å‰ç«¯**
- Layui 2.8.18
- Monaco Editor 0.44.0
- D3.js 7.8.5
- åŸç”Ÿ JavaScript

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒè¦æ±‚

- Go 1.24+
- Docker & Docker Compose
- Node.js (å¯é€‰ï¼Œç”¨äºå‰ç«¯å¼€å‘)

### 2. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/zibianqu/novel-study.git
cd novel-study
```

### 3. é…ç½®ç¯å¢ƒå˜é‡

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„é…ç½®
```

**é‡è¦é…ç½®é¡¹**ï¼š
```env
# OpenAI API Keyï¼ˆå¿…éœ€ï¼‰
OPENAI_API_KEY=your_openai_api_key_here

# JWT Secretï¼ˆå»ºè®®ä¿®æ”¹ï¼‰
JWT_SECRET=your_jwt_secret_key_change_this_in_production

# æ•°æ®åº“å¯†ç 
DB_PASSWORD=your_password_here
NEO4J_PASSWORD=your_neo4j_password
```

### 4. å¯åŠ¨æ•°æ®åº“

```bash
docker-compose up -d
```

ç­‰å¾… PostgreSQL å’Œ Neo4j å¯åŠ¨å®Œæˆï¼ˆçº¦ 30 ç§’ï¼‰ã€‚

### 5. è¿è¡Œæ•°æ®åº“è¿ç§»

```bash
cd backend
# æ‰‹åŠ¨æ‰§è¡Œ SQL è¿ç§»æ–‡ä»¶
psql -h localhost -U novelforge -d novelforge_db -f migrations/001_users.sql
psql -h localhost -U novelforge -d novelforge_db -f migrations/002_projects.sql
psql -h localhost -U novelforge -d novelforge_db -f migrations/003_chapters.sql
psql -h localhost -U novelforge -d novelforge_db -f migrations/004_storylines.sql
psql -h localhost -U novelforge -d novelforge_db -f migrations/005_knowledge_base.sql
```

### 6. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
go mod download
go run cmd/server/main.go
```

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¯´æ˜å¯åŠ¨æˆåŠŸï¼š
```
âœ… PostgreSQL è¿æ¥æˆåŠŸ
âœ… Neo4j è¿æ¥æˆåŠŸ
âœ… AI å¼•æ“åˆå§‹åŒ–å®Œæˆï¼Œå·²æ³¨å†Œ 7 ä¸ª Agent
âœ… RAG ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ
ğŸš€ NovelForge AI æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
ğŸ”— å‰ç«¯: http://localhost:8080
ğŸ“š API: http://localhost:8080/api/v1
```

### 7. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8080

## ğŸ“– ä½¿ç”¨æŒ‡å—

### 1. æ³¨å†Œå¹¶ç™»å½•

è®¿é—®é¦–é¡µï¼Œç‚¹å‡»ã€Œæ³¨å†Œã€åˆ›å»ºè´¦å·ã€‚

### 2. åˆ›å»ºé¡¹ç›®

ç™»å½•åè¿›å…¥ä»ªè¡¨æ¿ï¼Œç‚¹å‡»ã€Œåˆ›å»ºæ–°é¡¹ç›®ã€ï¼š
- é¡¹ç›®åç§°ï¼šä¾‹å¦‚ã€Œæˆ‘çš„ç¬¬ä¸€éƒ¨å°è¯´ã€
- é¡¹ç›®ç±»å‹ï¼šé•¿ç¯‡å°è¯´ / çŸ­ç¯‡å°è¯´ / æ–‡æ¡ˆåˆ›ä½œ
- é¢˜æç±»å‹ï¼šç°ä»£éƒ½å¸‚ / ç„å¹»ä¿®ä»™ / ç§‘å¹»ç­‰
- é¡¹ç›®ç®€ä»‹ï¼šç®€å•æè¿°æ•…äº‹æ¢—æ¦‚

### 3. æ·»åŠ çŸ¥è¯†åº“

è¿›å…¥ã€ŒçŸ¥è¯†åº“ã€é¡µé¢ï¼Œæ·»åŠ ï¼š
- **è§’è‰²è®¾å®š**ï¼šä¸»è§’ã€é…è§’çš„æ€§æ ¼ã€èƒŒæ™¯
- **ä¸–ç•Œè§‚**ï¼šä¸–ç•Œåœ°å›¾ã€åŠ¿åŠ›åˆ†å¸ƒã€è§„åˆ™è®¾å®š
- **å‰§æƒ…çº¿ç´¢**ï¼šä¼ç¬”ã€å…³é”®äº‹ä»¶

### 4. å¼€å§‹åˆ›ä½œ

è¿›å…¥ã€Œç¼–è¾‘å™¨ã€ï¼š
1. ç‚¹å‡»ã€Œæ–°å»ºç« èŠ‚ã€
2. è¾“å…¥ç« èŠ‚æ ‡é¢˜
3. åœ¨ Monaco Editor ä¸­å¼€å§‹å†™ä½œ
4. æŒ‰ `Ctrl+S` ä¿å­˜ï¼ˆæˆ–è‡ªåŠ¨ä¿å­˜ï¼‰

### 5. AI è¾…åŠ©

ç‚¹å‡»ã€ŒAI åŠ©æ‰‹ã€æŒ‰é’®ï¼Œåœ¨å¯¹è¯æ¡†ä¸­è¾“å…¥ï¼š
```
å¸®æˆ‘å†™ä¸€æ®µä¸»è§’ç™»åœºçš„æå†™
```

AI ä¼šåŸºäºä½ çš„çŸ¥è¯†åº“å†…å®¹ç”Ÿæˆç¬¦åˆè®¾å®šçš„æ–‡æœ¬ã€‚

### 6. çŸ¥è¯†å›¾è°±

è¿›å…¥ã€ŒçŸ¥è¯†å›¾è°±ã€é¡µé¢ï¼Œå¯è§†åŒ–æŸ¥çœ‹ï¼š
- è§’è‰²å…³ç³»ç½‘ç»œ
- åœ°ç‚¹è¿æ¥
- äº‹ä»¶å…³è”

### 7. ä¸‰çº¿ç®¡ç†

è¿›å…¥ã€Œä¸‰çº¿ç®¡ç†ã€é¡µé¢ï¼Œè§„åˆ’ï¼š
- **å¤©çº¿**ï¼šä¸–ç•Œå¤§åŠ¿ã€é‡å¤§äº‹ä»¶
- **åœ°çº¿**ï¼šä¸»è§’æˆé•¿ã€æ€§æ ¼å˜åŒ–
- **å‰§æƒ…çº¿**ï¼šå…·ä½“ç« èŠ‚æƒ…èŠ‚

## ğŸ“‹ API æ–‡æ¡£

### è®¤è¯ç›¸å…³

```bash
# æ³¨å†Œ
POST /api/v1/auth/register
{
  "username": "testuser",
  "email": "test@example.com",
  "password": "password123"
}

# ç™»å½•
POST /api/v1/auth/login
{
  "email": "test@example.com",
  "password": "password123"
}
```

### é¡¹ç›®ç®¡ç†

```bash
# è·å–é¡¹ç›®åˆ—è¡¨
GET /api/v1/projects
Authorization: Bearer {token}

# åˆ›å»ºé¡¹ç›®
POST /api/v1/projects
{
  "title": "æˆ‘çš„å°è¯´",
  "type": "novel_long",
  "genre": "ç°ä»£éƒ½å¸‚",
  "description": "ä¸€ä¸ªå…³äº..."
}
```

### AI åŠŸèƒ½

```bash
# AI å¯¹è¯
POST /api/v1/ai/chat
{
  "project_id": 1,
  "message": "å¸®æˆ‘å†™ä¸€æ®µå¼€åœº"
}

# RAG çŸ¥è¯†æ£€ç´¢
POST /api/v1/knowledge/search
{
  "project_id": 1,
  "query": "ä¸»è§’çš„æ€§æ ¼ç‰¹ç‚¹",
  "top_k": 3
}
```

å®Œæ•´ API æ–‡æ¡£è¯·æŸ¥çœ‹ï¼š[API.md](docs/API.md)

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
novel-study/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ cmd/server/          # ä¸»ç¨‹åºå…¥å£
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ ai/              # AI å¼•æ“å’Œ Agent
â”‚   â”‚   â”‚   â”œâ”€â”€ agents/      # 7 ä¸ª Agent å®ç°
â”‚   â”‚   â”‚   â”œâ”€â”€ rag/         # RAG ç³»ç»Ÿ
â”‚   â”‚   â”‚   â””â”€â”€ openai/      # OpenAI å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ config/          # é…ç½®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ handler/         # HTTP å¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ middleware/      # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ model/           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ repository/      # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â””â”€â”€ service/         # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â””â”€â”€ migrations/          # SQL è¿ç§»æ–‡ä»¶
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ css/                 # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ js/                  # JavaScript æ–‡ä»¶
â”‚   â””â”€â”€ *.html               # HTML é¡µé¢
â”œâ”€â”€ docker-compose.yml       # Docker é…ç½®
â”œâ”€â”€ .env.example             # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ README.md                # é¡¹ç›®æ–‡æ¡£
```

### æ·»åŠ æ–° Agent

1. åœ¨ `backend/internal/ai/agents/` åˆ›å»ºæ–°æ–‡ä»¶
2. å®ç° `Agent` æ¥å£
3. åœ¨ `backend/internal/ai/engine.go` æ³¨å†Œ

### æ‰©å±•çŸ¥è¯†å›¾è°±

1. åœ¨ Neo4j ä¸­å®šä¹‰æ–°èŠ‚ç‚¹ç±»å‹
2. æ›´æ–° `backend/internal/repository/neo4j_repo.go`
3. å‰ç«¯ D3.js ä¸­æ·»åŠ æ–°æ ·å¼

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- **pgvector HNSW ç´¢å¼•**ï¼šå¿«é€Ÿå‘é‡æ£€ç´¢
- **Redis ç¼“å­˜**ï¼šä¼šè¯å’Œçƒ­æ•°æ®ç¼“å­˜
- **å¹¶å‘ Agent æ‰§è¡Œ**ï¼šåˆ©ç”¨ Goroutine
- **å‰ç«¯æ‡’åŠ è½½**ï¼šæŒ‰éœ€åŠ è½½èµ„æº

## ğŸ”’ å®‰å…¨æ€§

- JWT è®¤è¯
- å¯†ç  bcrypt åŠ å¯†
- SQL é¢„ç¼–è¯‘é˜²æ³¨å…¥
- CORS è·¨åŸŸä¿æŠ¤
- è¾“å…¥éªŒè¯

## ğŸ“ å¾…åŠäº‹é¡¹

- [ ] å¯¼å‡ºåŠŸèƒ½ï¼ˆPDF/EPUBï¼‰
- [ ] å¤šäººåä½œ
- [ ] ç‰ˆæœ¬æ§åˆ¶
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] è¯­éŸ³è¾“å…¥
- [ ] AI è¯­éŸ³åˆæˆ

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ License

MIT License

## ğŸ‘¥ ä½œè€…

[@zibianqu](https://github.com/zibianqu)

---

**â­ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Starï¼**
